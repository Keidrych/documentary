{"version":3,"sources":["../../src/lib/replace-stream.js"],"names":["LOG","createReplaceStream","toc","s","re","replacement","tableRule","titleRule"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,MAAM,oBAAS,KAAT,CAAZ;;AAEe,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;AAC/C,QAAMC,IAAI,6BAAc,CACtB;AACEC,QAAI,qBADN;;AAEEC,kBAAc;AACZL,UAAI,mBAAJ;AACA,aAAO,EAAP;AACD;;AALH,GADsB,EAQtB;AACEI,QAAI,WADN;AAEEC,iBAAaH;AAFf,GARsB,EAYtB;AACEE,QAAI,wBADN;AAEEC,iBAAaC;AAFf,GAZsB,EAgBtBC,WAhBsB,CAAd,CAAV;AAkBA,SAAOJ,CAAP;AACD","sourcesContent":["import { replaceStream } from 'restream'\nimport { debuglog } from 'util'\nimport { tableRule, titleRule } from '.'\n\nconst LOG = debuglog('doc')\n\nexport default function createReplaceStream(toc) {\n  const s = replaceStream([\n    {\n      re: /<!--[\\s\\S]*?-->\\n*/g,\n      replacement() {\n        LOG('stripping comment')\n        return ''\n      },\n    },\n    {\n      re: /^%TOC%$/gm,\n      replacement: toc,\n    },\n    {\n      re: /```table([\\s\\S]+?)```/g,\n      replacement: tableRule,\n    },\n    titleRule,\n  ])\n  return s\n}\n"],"file":"replace-stream.js"}