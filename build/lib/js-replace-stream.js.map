{"version":3,"sources":["../../src/lib/js-replace-stream.js"],"names":[],"mappings":"AAAA,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ;AACrC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;AAC7C,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK;;AAEtC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,WAAW,CAAC;EACtC,WAAW,CAAC,CAAC,CAAC;IACZ,KAAK,CAAC;MACJ,aAAa;MACb,SAAS;IACX,CAAC;IACD,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;;IAEf,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ;IACxB,CAAC;EACH;;;;;EAKA,QAAQ,CAAC,QAAQ,CAAC,CAAC;IACjB,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,MAAM,CAAC;QACL,CAAC,CAAC,CAAC,GAAG;QACN,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO;MACzB;IACF,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM;MACd,CAAC,CAAC,CAAC,YAAY;IACjB;EACF;;;;EAIA,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;IACV,MAAM,CAAC,IAAI,CAAC;EACd;AACF;;;;AAIA,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC;EAC9C,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC;;EAE5B,MAAM,CAAC;AACT","file":"lib/js-replace-stream.js","sourcesContent":["import { Replaceable } from 'restream'\nimport typedefJsRule from './rules/typedef-js'\nimport JSDocRule from './typedef/jsdoc'\n\nclass JSReplaceable extends Replaceable {\n  constructor() {\n    super([\n      typedefJsRule,\n      JSDocRule,\n    ])\n    this._types = {}\n\n    this.on('types', typedefs => {\n      this.addTypes(typedefs)\n    })\n  }\n  /**\n   * Add types emited during typedefJsRule replacement.\n   * @param {Type[]} typedefs\n   */\n  addTypes(typedefs) {\n    const typedefsHash = typedefs.reduce((acc, typedef) => {\n      return {\n        ...acc,\n        [typedef.name]: typedef,\n      }\n    }, {})\n    this._types = {\n      ...this._types,\n      ...typedefsHash,\n    }\n  }\n  /**\n   * @type {Object.<string, Type>}\n   */\n  get types() {\n    return this._types\n  }\n}\n\n/** @typedef {import('./typedef/Type').default} Type */\n\nexport default function createJsReplaceStream() {\n  const s = new JSReplaceable()\n\n  return s\n}"]}