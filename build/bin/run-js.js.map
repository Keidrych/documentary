{"version":3,"sources":["../../src/bin/run-js.js"],"names":["runJs","source","output","s","rs","pipe","c","Catchment","res","promise","ws","Promise","r","j","on","end","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;;;;AAIe,eAAeA,KAAf,CAAqBC,MAArB,EAA6BC,SAASD,MAAtC,EAA8C;AAC3D,QAAME,IAAI,0BAAiBF,MAAjB,CAAV;AACA,QAAMG,KAAK,+BAAX;AACAD,IAAEE,IAAF,CAAOD,EAAP;AACA,QAAME,IAAI,IAAIC,kBAAJ,CAAc;AACtBH;AADsB,GAAd,CAAV;AAGA,QAAMI,MAAM,MAAMF,EAAEG,OAApB;AACA,QAAMC,KAAK,2BAAkBR,MAAlB,CAAX;AACA,QAAM,IAAIS,OAAJ,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC1BH,OAAGI,EAAH,CAAM,OAAN,EAAeD,CAAf,EAAkBE,GAAlB,CAAsBP,GAAtB,EAA2BI,CAA3B;AACD,GAFK,CAAN;AAGAI,UAAQC,GAAR,CAAY,IAAIhB,UAAUC,MAAV,GAAmB,CAAC,8BAAD,EAAiCD,MAAjC,CAAnB,GAA8D,CAAC,oBAAD,EAAuBC,MAAvB,CAAlE,CAAZ;AACD","sourcesContent":["import { createWriteStream, createReadStream } from 'fs'\nimport Catchment from 'catchment'\nimport createJsReplaceStream from '../lib/js-replace-stream'\n\n/**\n * Process a JavaScript file.\n * @param {string} source Path to the source JavaScript file.\n */\nexport default async function runJs(source, output = source) {\n  const s = createReadStream(source)\n  const rs = createJsReplaceStream()\n  s.pipe(rs)\n  const c = new Catchment({\n    rs,\n  })\n  const res = await c.promise\n  const ws = createWriteStream(output)\n  await new Promise((r, j) => {\n    ws.on('error', j).end(res, r)\n  })\n  console.log(...(source == output ? ['Updated %s to include types.', source] : ['Saved output to %s', output]))\n}\n"],"file":"run-js.js"}