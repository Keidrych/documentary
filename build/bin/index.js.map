{"version":3,"sources":["../../src/bin/index.js"],"names":["LOG","DEBUG","test","process","env","NODE_DEBUG","source","output","toc","watch","command","short","boolean","argv","doRun","stack","message","console","log","exit"],"mappings":"AAAA;;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,oBAAS,KAAT,CAAZ;AACA,MAAMC,QAAQ,MAAMC,IAAN,CAAWC,QAAQC,GAAR,CAAYC,UAAvB,CAAd;AAEA,MAAM;AACJC,QADI;AAEJC,QAFI;AAGJC,KAHI;AAIJC;AAJI,IAKF,qBAAO;AACTH,UAAQ;AACNI,aAAS;AADH,GADC;AAITF,OAAK;AACHG,WAAO,GADJ;AAEHC,aAAS;AAFN,GAJI;AAQTH,SAAO;AACLE,WAAO,GADF;AAELC,aAAS;AAFJ,GARE;AAYTL,UAAQ;AAZC,CAAP,EAaDJ,QAAQU,IAbP,CALJ;;AAoBA,MAAMC,QAAQ,YAAY;AACxB,MAAI;AACF,UAAM,kBAAIR,MAAJ,EAAYC,MAAZ,EAAoBC,GAApB,CAAN;AACD,GAFD,CAEE,OAAO;AAAEO,SAAF;AAASC;AAAT,GAAP,EAA2B;AAC3Bf,YAAQD,IAAIe,KAAJ,CAAR,GAAqBE,QAAQC,GAAR,CAAYF,OAAZ,CAArB;AACD;AACF,CAND;;AAQA,CAAC,YAAY;AACX,MAAI,CAACV,MAAL,EAAa;AACXW,YAAQC,GAAR,CAAY,+BAAZ,EADW,CACkC;;AAC7Cf,YAAQgB,IAAR,CAAa,CAAb;AACD;;AACD,QAAML,OAAN;;AACA,MAAIL,KAAJ,EAAW;AACT,uBAAUH,MAAV,EAAkB,YAAY;AAC5B,YAAMQ,OAAN;AACD,KAFD;AAGD;AACF,CAXD","sourcesContent":["#!/usr/bin/env node\nimport { watchFile } from 'fs'\nimport argufy from 'argufy'\nimport { debuglog } from 'util'\nimport run from './run'\n\nconst LOG = debuglog('doc')\nconst DEBUG = /doc/.test(process.env.NODE_DEBUG)\n\nconst {\n  source,\n  output,\n  toc,\n  watch,\n} = argufy({\n  source: {\n    command: true,\n  },\n  toc: {\n    short: 't',\n    boolean: true,\n  },\n  watch: {\n    short: 'w',\n    boolean: true,\n  },\n  output: 'o',\n}, process.argv)\n\nconst doRun = async () => {\n  try {\n    await run(source, output, toc)\n  } catch ({ stack, message }) {\n    DEBUG ? LOG(stack) : console.log(message)\n  }\n}\n\n(async () => {\n  if (!source) {\n    console.log('Please specify an input file.') // print usage\n    process.exit(1)\n  }\n  await doRun()\n  if (watch) {\n    watchFile(source, async () => {\n      await doRun()\n    })\n  }\n})()\n"],"file":"index.js"}